{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": { "type": "grafana", "uid": "-- Grafana --" },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "target": { "limit": 100, "matchAny": false, "tags": [], "type": "dashboard" },
        "type": "dashboard"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant temperature inlet.*\"} > 45 or DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant temperature inlet.*\"} < 18",
        "hide": true,
        "iconColor": "red",
        "name": "Coolant inlet critical",
        "textFormat": "Critical",
        "titleFormat": "Coolant inlet temp"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "(DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant temperature inlet.*\"} > 40 and DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant temperature inlet.*\"} <= 45) or (DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant temperature inlet.*\"} >= 18 and DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant temperature inlet.*\"} < 22)",
        "hide": true,
        "iconColor": "yellow",
        "name": "Coolant inlet warning",
        "textFormat": "Warning",
        "titleFormat": "Coolant inlet temp"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant temperature outlet.*\"} > 65",
        "hide": true,
        "iconColor": "red",
        "name": "Coolant outlet critical",
        "textFormat": "Critical",
        "titleFormat": "Coolant outlet temp"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant temperature outlet.*\"} > 60 and DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant temperature outlet.*\"} <= 65",
        "hide": true,
        "iconColor": "yellow",
        "name": "Coolant outlet warning",
        "textFormat": "Warning",
        "titleFormat": "Coolant outlet temp"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant deltaT.*\"} > 20",
        "hide": true,
        "iconColor": "red",
        "name": "Coolant deltaT critical",
        "textFormat": "Critical",
        "titleFormat": "Coolant deltaT"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant deltaT.*\"} > 15 and DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant deltaT.*\"} <= 20",
        "hide": true,
        "iconColor": "yellow",
        "name": "Coolant deltaT warning",
        "textFormat": "Warning",
        "titleFormat": "Coolant deltaT"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Coolant level\"} == 0",
        "hide": true,
        "iconColor": "red",
        "name": "Coolant level critical",
        "textFormat": "Critical - LOW",
        "titleFormat": "Coolant level"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"LEAK detection\"} == 1",
        "hide": true,
        "iconColor": "red",
        "name": "Coolant leak critical",
        "textFormat": "Critical - LEAKED",
        "titleFormat": "Coolant leakage"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air temperature\"} > 50",
        "hide": true,
        "iconColor": "red",
        "name": "Chassis temp critical",
        "textFormat": "Critical",
        "titleFormat": "Chassis temperature"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air temperature\"} > 40 and DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air temperature\"} <= 50",
        "hide": true,
        "iconColor": "yellow",
        "name": "Chassis temp warning",
        "textFormat": "Warning",
        "titleFormat": "Chassis temperature"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air humidity\"} > 80 or DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air humidity\"} < 10",
        "hide": true,
        "iconColor": "red",
        "name": "Chassis humidity critical",
        "textFormat": "Critical",
        "titleFormat": "Chassis humidity"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "(DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air humidity\"} > 60 and DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air humidity\"} <= 80) or (DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air humidity\"} >= 10 and DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air humidity\"} < 20)",
        "hide": true,
        "iconColor": "yellow",
        "name": "Chassis humidity warning",
        "textFormat": "Warning",
        "titleFormat": "Chassis humidity"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\".*asic temperature\"} > 90",
        "hide": true,
        "iconColor": "red",
        "name": "GPU temp critical",
        "textFormat": "Critical",
        "titleFormat": "GPU temperature"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\".*asic temperature\"} > 75 and DLC_sensors_gauge{server_name=\"dg5R\", metric=~\".*asic temperature\"} <= 90",
        "hide": true,
        "iconColor": "yellow",
        "name": "GPU temp warning",
        "textFormat": "Warning",
        "titleFormat": "GPU temperature"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"CPU[0-9]+ temperature\"} > 95",
        "hide": true,
        "iconColor": "red",
        "name": "CPU temp critical",
        "textFormat": "Critical",
        "titleFormat": "CPU temperature"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"CPU[0-9]+ temperature\"} > 85 and DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"CPU[0-9]+ temperature\"} <= 95",
        "hide": true,
        "iconColor": "yellow",
        "name": "CPU temp warning",
        "textFormat": "Warning",
        "titleFormat": "CPU temperature"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"OOM_count\"} >= 1",
        "hide": true,
        "iconColor": "red",
        "name": "OOM critical",
        "textFormat": "Critical",
        "titleFormat": "Out of Memory"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Network link status\"} == 0",
        "hide": true,
        "iconColor": "red",
        "name": "Network link down",
        "textFormat": "Critical - DOWN",
        "titleFormat": "Network link"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Network drops rate\"} >= 0.05",
        "hide": true,
        "iconColor": "red",
        "name": "Network drops critical",
        "textFormat": "Critical",
        "titleFormat": "Network drops"
      },
      {
        "datasource": { "type": "prometheus", "uid": "${datasource}" },
        "enable": true,
        "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Network drops rate\"} > 0.01 and DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Network drops rate\"} < 0.05",
        "hide": true,
        "iconColor": "yellow",
        "name": "Network drops warning",
        "textFormat": "Warning",
        "titleFormat": "Network drops"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": null,
  "links": [],
  "panels": [
    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 },
      "id": 1,
      "panels": [],
      "title": "System Summary",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 12, "w": 12, "x": 0, "y": 1 },
      "id": 2,
      "options": {
        "SVGBaseFix": true,
        "add100Percentage": true,
        "centerAlignContent": false,
        "overflow": "auto",
        "css": "* { box-sizing: border-box; margin: 0; padding: 0; }\n.overview { width: 100%; height: 100%; padding: 10px; display: flex; flex-direction: column; gap: 6px; border-radius: 8px; transition: background-color 0.5s; font-family: Inter, sans-serif; }\n.overview.normal { background: rgba(55,135,45,0.15); border: 2px solid #37872d; }\n.overview.warning { background: rgba(229,172,14,0.15); border: 2px solid #e5ac0e; }\n.overview.critical { background: rgba(196,22,42,0.15); border: 2px solid #c4162a; }\n.status-bar { display: flex; justify-content: space-between; align-items: center; padding: 6px 12px; border-radius: 4px; color: white; font-weight: 700; font-size: 14px; }\n.status-bar.normal { background: #37872d; }\n.status-bar.warning { background: #e5ac0e; color: #000; }\n.status-bar.critical { background: #c4162a; }\n.sections { display: flex; gap: 6px; flex: 1; min-height: 0; }\n.section { flex: 1; background: rgba(255,255,255,0.04); border-radius: 6px; padding: 8px; overflow-y: auto; }\n.section h4 { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; opacity: 0.6; color: #ccc; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 4px; }\n.mr { display: flex; justify-content: space-between; padding: 2px 0; font-size: 11px; color: #ddd; }\n.mr .lb { opacity: 0.7; }\n.mr .vl { font-weight: 600; font-variant-numeric: tabular-nums; }\n.vl.normal { color: #73BF69; }\n.vl.warning { color: #FADE2A; }\n.vl.critical { color: #F2495C; }\n.sub { font-size: 10px; color: #999; margin-top: 4px; margin-bottom: 2px; font-weight: 600; }",
        "html": "<div class='overview normal' id='ov'>\n  <div class='status-bar normal' id='sb'><span>dg5R Server</span><span id='st'>Normal</span></div>\n  <div class='sections'>\n    <div class='section'>\n      <h4>Cooling Health</h4>\n      <div class='sub'>Loop 1</div>\n      <div class='mr'><span class='lb'>Inlet1</span><span class='vl' id='v-inlet1'>-</span></div>\n      <div class='mr'><span class='lb'>Outlet1</span><span class='vl' id='v-outlet1'>-</span></div>\n      <div class='mr'><span class='lb'>\u0394T1</span><span class='vl' id='v-dt1'>-</span></div>\n      <div class='sub'>Loop 2</div>\n      <div class='mr'><span class='lb'>Inlet2</span><span class='vl' id='v-inlet2'>-</span></div>\n      <div class='mr'><span class='lb'>Outlet2</span><span class='vl' id='v-outlet2'>-</span></div>\n      <div class='mr'><span class='lb'>\u0394T2</span><span class='vl' id='v-dt2'>-</span></div>\n      <div class='mr'><span class='lb'>Coolant Level</span><span class='vl' id='v-level'>-</span></div>\n      <div class='mr'><span class='lb'>Leakage</span><span class='vl' id='v-leak'>-</span></div>\n      <div class='mr'><span class='lb'>Chassis Temp</span><span class='vl' id='v-ctemp'>-</span></div>\n      <div class='mr'><span class='lb'>Chassis Humidity</span><span class='vl' id='v-chumid'>-</span></div>\n    </div>\n    <div class='section'>\n      <h4>Compute Health</h4>\n      <div class='sub'>AI Processors (avg)</div>\n      <div class='mr'><span class='lb'>Temperature</span><span class='vl' id='v-gpu-temp'>-</span></div>\n      <div class='mr'><span class='lb'>Power</span><span class='vl' id='v-gpu-pwr'>-</span></div>\n      <div class='mr'><span class='lb'>Mem Util</span><span class='vl' id='v-gpu-mem'>-</span></div>\n      <div class='mr'><span class='lb'>Core Util</span><span class='vl' id='v-gpu-core'>-</span></div>\n      <div class='sub'>CPUs (avg)</div>\n      <div class='mr'><span class='lb'>Temperature</span><span class='vl' id='v-cpu-temp'>-</span></div>\n      <div class='mr'><span class='lb'>Power</span><span class='vl' id='v-cpu-pwr'>-</span></div>\n      <div class='mr'><span class='lb'>Core Util</span><span class='vl' id='v-cpu-util'>-</span></div>\n      <div class='sub'>Memory</div>\n      <div class='mr'><span class='lb'>Available</span><span class='vl' id='v-mem-avail'>-</span></div>\n      <div class='mr'><span class='lb'>Swap Usage</span><span class='vl' id='v-swap'>-</span></div>\n      <div class='mr'><span class='lb'>OOM</span><span class='vl' id='v-oom'>-</span></div>\n    </div>\n    <div class='section'>\n      <h4>Network Health</h4>\n      <div class='mr'><span class='lb'>Link Status</span><span class='vl' id='v-link'>-</span></div>\n      <div class='mr'><span class='lb'>TX Throughput</span><span class='vl' id='v-tx'>-</span></div>\n      <div class='mr'><span class='lb'>RX Throughput</span><span class='vl' id='v-rx'>-</span></div>\n      <div class='mr'><span class='lb'>Error Rate</span><span class='vl' id='v-err'>-</span></div>\n      <div class='mr'><span class='lb'>Drop Rate</span><span class='vl' id='v-drop'>-</span></div>\n    </div>\n  </div>\n</div>",
        "onRender": "const m={};\ndata.series.forEach(s=>{\n  if(!s.fields||s.fields.length<2)return;\n  const f=s.fields[1];\n  const metric=(f.labels||{}).metric||'';\n  const vals=f.values;\n  if(vals&&vals.length>0) m[metric]=vals[vals.length-1];\n});\n\nfunction fmt(v,u,d){return v!==undefined&&v!==null?v.toFixed(d!==undefined?d:1)+u:'-';}\nfunction el(id){return htmlNode.querySelector('#'+id);}\nfunction setV(id,text,cls){\n  const e=el(id); if(!e)return;\n  e.textContent=text;\n  e.className='vl '+(cls||'normal');\n}\n\nfunction evalInlet(v){if(v===undefined)return'normal';if(v>45||v<18)return'critical';if(v>40||v<22)return'warning';return'normal';}\nfunction evalOutlet(v){if(v===undefined)return'normal';if(v>65)return'critical';if(v>60)return'warning';return'normal';}\nfunction evalDelta(v){if(v===undefined)return'normal';if(v>20)return'critical';if(v>15)return'warning';return'normal';}\nfunction evalChasT(v){if(v===undefined)return'normal';if(v>50)return'critical';if(v>40)return'warning';return'normal';}\nfunction evalChasH(v){if(v===undefined)return'normal';if(v>80||v<10)return'critical';if(v>60||v<20)return'warning';return'normal';}\nfunction evalGpuT(v){if(v===undefined)return'normal';if(v>90)return'critical';if(v>75)return'warning';return'normal';}\nfunction evalCpuT(v){if(v===undefined)return'normal';if(v>95)return'critical';if(v>85)return'warning';return'normal';}\nfunction evalMemAvail(total,avail){if(!total||!avail)return'normal';const p=avail/total*100;if(p<10)return'critical';if(p<20)return'warning';return'normal';}\nfunction evalSwap(v){if(v===undefined)return'normal';if(v>0)return'warning';return'normal';}\nfunction evalOom(v){if(v===undefined)return'normal';if(v>=1)return'critical';return'normal';}\nfunction evalLink(v){if(v===undefined)return'normal';if(v===0)return'critical';return'normal';}\nfunction evalDrop(v){if(v===undefined)return'normal';if(v>=0.05)return'critical';if(v>0.01)return'warning';return'normal';}\n\nconst sts=[];\n\n// Cooling\nconst i1=m['Coolant temperature inlet1'],i2=m['Coolant temperature inlet2'];\nconst o1=m['Coolant temperature outlet1'],o2=m['Coolant temperature outlet2'];\nconst d1=m['Coolant deltaT1'],d2=m['Coolant deltaT2'];\nconst lv=m['Coolant level'],lk=m['LEAK detection'];\nconst ct=m['Air temperature'],ch=m['Air humidity'];\n\nlet s;\ns=evalInlet(i1);sts.push(s);setV('v-inlet1',fmt(i1,'\u00b0C'),s);\ns=evalInlet(i2);sts.push(s);setV('v-inlet2',fmt(i2,'\u00b0C'),s);\ns=evalOutlet(o1);sts.push(s);setV('v-outlet1',fmt(o1,'\u00b0C'),s);\ns=evalOutlet(o2);sts.push(s);setV('v-outlet2',fmt(o2,'\u00b0C'),s);\ns=evalDelta(d1);sts.push(s);setV('v-dt1',fmt(d1,'\u00b0C'),s);\ns=evalDelta(d2);sts.push(s);setV('v-dt2',fmt(d2,'\u00b0C'),s);\n\ns=lv===0?'critical':'normal';sts.push(s);setV('v-level',lv===1?'HIGH':'LOW',s);\ns=lk===1?'critical':'normal';sts.push(s);setV('v-leak',lk===1?'LEAKED':'NORMAL',s);\ns=evalChasT(ct);sts.push(s);setV('v-ctemp',fmt(ct,'\u00b0C'),s);\ns=evalChasH(ch);sts.push(s);setV('v-chumid',fmt(ch,'%'),s);\n\n// Compute - GPU averages\nconst gpuTs=[],gpuPs=[],gpuMs=[],gpuCs=[];\nObject.keys(m).forEach(k=>{\n  if(k.includes('asic temperature'))gpuTs.push(m[k]);\n  if(k.includes('current power usage'))gpuPs.push(m[k]);\n  if(k.includes('memory utilization'))gpuMs.push(m[k]);\n  if(k.includes('core utilization'))gpuCs.push(m[k]);\n});\nfunction avg(a){return a.length?a.reduce((s,v)=>s+v,0)/a.length:undefined;}\nconst gaT=avg(gpuTs),gaP=avg(gpuPs),gaM=avg(gpuMs),gaC=avg(gpuCs);\ns=evalGpuT(gaT);sts.push(s);setV('v-gpu-temp',fmt(gaT,'\u00b0C'),s);\nsetV('v-gpu-pwr',fmt(gaP,'W'),'normal');\nsetV('v-gpu-mem',fmt(gaM,'%'),'normal');\nsetV('v-gpu-core',fmt(gaC,'%'),'normal');\n\n// Compute - CPU\nconst cpuTs=[],cpuPs=[];\nObject.keys(m).forEach(k=>{\n  if(k.match(/^CPU\\d+ temperature$/))cpuTs.push(m[k]);\n  if(k.match(/^CPU\\d+ power usage$/))cpuPs.push(m[k]);\n});\nconst caT=avg(cpuTs),caP=avg(cpuPs),cuU=m['CPU Usage'];\ns=evalCpuT(caT);sts.push(s);setV('v-cpu-temp',fmt(caT,'\u00b0C'),s);\nsetV('v-cpu-pwr',fmt(caP,'W'),'normal');\nsetV('v-cpu-util',fmt(cuU,'%'),'normal');\n\n// Memory\nconst mT=m['Memory_total'],mA=m['Memory_available'],sw=m['Swap_usage'],oom=m['OOM_count'];\ns=evalMemAvail(mT,mA);sts.push(s);setV('v-mem-avail',mT&&mA?((mA/mT*100).toFixed(1)+'%'):'-',s);\ns=evalSwap(sw);sts.push(s);setV('v-swap',fmt(sw,' GB'),s);\ns=evalOom(oom);sts.push(s);setV('v-oom',oom!==undefined?oom.toString():'-',s);\n\n// Network\nconst nl=m['Network link status'],ntx=m['Network TX throughput'],nrx=m['Network RX throughput'];\nconst ne=m['Network errors rate'],nd=m['Network drops rate'];\ns=evalLink(nl);sts.push(s);setV('v-link',nl===1?'UP':'DOWN',s);\nsetV('v-tx',fmt(ntx,' Gbps'),'normal');\nsetV('v-rx',fmt(nrx,' Gbps'),'normal');\nsetV('v-err',fmt(ne,'%'),'normal');\ns=evalDrop(nd);sts.push(s);setV('v-drop',fmt(nd,'%'),s);\n\n// Overall status\nlet worst='normal';\nsts.forEach(v=>{if(v==='critical')worst='critical';else if(v==='warning'&&worst!=='critical')worst='warning';});\nconst ov=el('ov');if(ov)ov.className='overview '+worst;\nconst sb=el('sb');if(sb)sb.className='status-bar '+worst;\nconst stEl=el('st');if(stEl)stEl.textContent=worst==='critical'?'Critical':worst==='warning'?'Warning':'Normal';",
        "onInit": ""
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\"}",
          "instant": true,
          "legendFormat": "{{metric}}",
          "refId": "A"
        }
      ],
      "title": "Server Overview",
      "type": "gapit-htmlgraphics-panel"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 12, "w": 12, "x": 12, "y": 1 },
      "id": 3,
      "options": {
        "alertInstanceLabelFilter": "",
        "alertName": "",
        "dashboardAlerts": false,
        "groupBy": [],
        "groupMode": "default",
        "maxItems": 20,
        "sortOrder": 1,
        "stateFilter": {
          "error": true,
          "firing": true,
          "noData": false,
          "normal": false,
          "pending": true
        },
        "viewMode": "list"
      },
      "pluginVersion": "12.3.3",
      "title": "Alert List",
      "type": "alertlist"
    },
    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 13 },
      "id": 4,
      "panels": [],
      "title": "Detailed",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 16, "w": 6, "x": 0, "y": 14 },
      "id": 5,
      "options": {
        "SVGBaseFix": true,
        "add100Percentage": true,
        "centerAlignContent": false,
        "overflow": "auto",
        "css": "* { box-sizing: border-box; margin: 0; padding: 0; }\n.cool { width: 100%; height: 100%; padding: 8px; font-family: Inter, sans-serif; color: #ddd; display: flex; flex-direction: column; }\n.diagram { flex: 1; position: relative; }\nsvg { width: 100%; height: 100%; }\n.sensor-val { font-size: 10px; font-weight: 700; font-family: monospace; }\n.sensor-val.normal { fill: #73BF69; }\n.sensor-val.warning { fill: #FADE2A; }\n.sensor-val.critical { fill: #F2495C; }\n.comp-label { font-size: 9px; fill: #999; }\n.comp-box { fill: rgba(255,255,255,0.06); stroke: rgba(255,255,255,0.2); stroke-width: 1; rx: 4; }\n.pipe { stroke: #4A9BF5; stroke-width: 3; fill: none; }\n.pipe-ret { stroke: #F2495C; stroke-width: 3; fill: none; }",
        "html": "<div class='cool'>\n  <div class='diagram'>\n    <svg viewBox='0 0 260 440' xmlns='http://www.w3.org/2000/svg'>\n      <!-- Reservoir -->\n      <rect class='comp-box' x='90' y='5' width='80' height='45'/>\n      <text class='comp-label' x='130' y='22' text-anchor='middle'>Reservoir</text>\n      <text class='sensor-val normal' id='sv-level' x='130' y='40' text-anchor='middle'>-</text>\n\n      <!-- Pump -->\n      <rect class='comp-box' x='100' y='70' width='60' height='30'/>\n      <text class='comp-label' x='130' y='89' text-anchor='middle'>Pump</text>\n\n      <!-- Manifold -->\n      <rect class='comp-box' x='15' y='130' width='100' height='30'/>\n      <text class='comp-label' x='65' y='149' text-anchor='middle'>Manifold</text>\n      <rect class='comp-box' x='145' y='130' width='100' height='30'/>\n      <text class='comp-label' x='195' y='149' text-anchor='middle'>Manifold</text>\n\n      <!-- Pipes: Reservoir -> Pump -> Manifolds -->\n      <path class='pipe' d='M130,50 L130,70'/>\n      <path class='pipe' d='M130,100 L130,115 L65,115 L65,130'/>\n      <path class='pipe' d='M130,100 L130,115 L195,115 L195,130'/>\n\n      <!-- Inlet sensors -->\n      <text class='sensor-val normal' id='sv-in1' x='15' y='125' font-size='9'>Inlet1: -</text>\n      <text class='sensor-val normal' id='sv-in2' x='145' y='125' font-size='9'>Inlet2: -</text>\n\n      <!-- Heat Source 1 -->\n      <rect class='comp-box' x='15' y='195' width='100' height='60' style='fill:rgba(242,73,92,0.1);stroke:#F2495C;'/>\n      <text class='comp-label' x='65' y='215' text-anchor='middle'>Heat Source 1</text>\n      <text class='comp-label' x='65' y='230' text-anchor='middle'>(GPU/CPU)</text>\n      <text class='sensor-val normal' id='sv-ct' x='65' y='248' text-anchor='middle' font-size='8'>-</text>\n\n      <!-- Heat Source 2 -->\n      <rect class='comp-box' x='145' y='195' width='100' height='60' style='fill:rgba(242,73,92,0.1);stroke:#F2495C;'/>\n      <text class='comp-label' x='195' y='215' text-anchor='middle'>Heat Source 2</text>\n      <text class='comp-label' x='195' y='230' text-anchor='middle'>(GPU/CPU)</text>\n      <text class='sensor-val normal' id='sv-ch' x='195' y='248' text-anchor='middle' font-size='8'>-</text>\n\n      <!-- Pipes: Manifold -> Heat Source -->\n      <path class='pipe' d='M65,160 L65,195'/>\n      <path class='pipe' d='M195,160 L195,195'/>\n\n      <!-- Leak sensors (between manifold and heat source) -->\n      <text class='sensor-val normal' id='sv-leak' x='130' y='182' text-anchor='middle' font-size='9'>Leak: -</text>\n\n      <!-- Outlet sensors -->\n      <text class='sensor-val normal' id='sv-out1' x='15' y='275' font-size='9'>Outlet1: -</text>\n      <text class='sensor-val normal' id='sv-out2' x='145' y='275' font-size='9'>Outlet2: -</text>\n\n      <!-- Return pipes -->\n      <path class='pipe-ret' d='M65,255 L65,290 L40,290 L40,340'/>\n      <path class='pipe-ret' d='M195,255 L195,290 L220,290 L220,340'/>\n\n      <!-- CDU / Return -->\n      <rect class='comp-box' x='15' y='340' width='60' height='30'/>\n      <text class='comp-label' x='45' y='359' text-anchor='middle'>CDU</text>\n      <rect class='comp-box' x='185' y='340' width='60' height='30'/>\n      <text class='comp-label' x='215' y='359' text-anchor='middle'>CDU</text>\n\n      <!-- Return to reservoir -->\n      <path class='pipe' d='M40,370 L40,400 L130,400 L130,50'/>\n      <path class='pipe' d='M220,370 L220,400 L130,400'/>\n\n      <!-- Delta T -->\n      <text class='sensor-val normal' id='sv-dt1' x='15' y='310' font-size='9'>\u0394T1: -</text>\n      <text class='sensor-val normal' id='sv-dt2' x='145' y='310' font-size='9'>\u0394T2: -</text>\n\n    </svg>\n  </div>\n</div>",
        "onRender": "const m={};\ndata.series.forEach(s=>{\n  if(!s.fields||s.fields.length<2)return;\n  const f=s.fields[1];\n  const metric=(f.labels||{}).metric||'';\n  const vals=f.values;\n  if(vals&&vals.length>0) m[metric]=vals[vals.length-1];\n});\n\nfunction fmt(v,d){return v!==undefined&&v!==null?v.toFixed(d!==undefined?d:1):'-';}\nfunction cls(status){return 'sensor-val '+status;}\n\nfunction evalInlet(v){if(v===undefined)return'normal';if(v>45||v<18)return'critical';if(v>40||v<22)return'warning';return'normal';}\nfunction evalOutlet(v){if(v===undefined)return'normal';if(v>65)return'critical';if(v>60)return'warning';return'normal';}\nfunction evalDelta(v){if(v===undefined)return'normal';if(v>20)return'critical';if(v>15)return'warning';return'normal';}\nfunction evalChasT(v){if(v===undefined)return'normal';if(v>50)return'critical';if(v>40)return'warning';return'normal';}\nfunction evalChasH(v){if(v===undefined)return'normal';if(v>80||v<10)return'critical';if(v>60||v<20)return'warning';return'normal';}\n\nfunction setEl(id,text,status){\n  const e=htmlNode.querySelector('#'+id);if(!e)return;\n  e.textContent=text;\n  e.setAttribute('class',cls(status));\n}\n\nconst i1=m['Coolant temperature inlet1'],i2=m['Coolant temperature inlet2'];\nconst o1=m['Coolant temperature outlet1'],o2=m['Coolant temperature outlet2'];\nconst d1=m['Coolant deltaT1'],d2=m['Coolant deltaT2'];\nconst lv=m['Coolant level'],lk=m['LEAK detection'];\nconst ct=m['Air temperature'],ch=m['Air humidity'];\n\nsetEl('sv-in1','Inlet1: '+fmt(i1)+'\u00b0C',evalInlet(i1));\nsetEl('sv-in2','Inlet2: '+fmt(i2)+'\u00b0C',evalInlet(i2));\nsetEl('sv-out1','Outlet1: '+fmt(o1)+'\u00b0C',evalOutlet(o1));\nsetEl('sv-out2','Outlet2: '+fmt(o2)+'\u00b0C',evalOutlet(o2));\nsetEl('sv-dt1','\u0394T1: '+fmt(d1)+'\u00b0C',evalDelta(d1));\nsetEl('sv-dt2','\u0394T2: '+fmt(d2)+'\u00b0C',evalDelta(d2));\nsetEl('sv-level',lv===1?'Level: HIGH':'Level: LOW',lv===0?'critical':'normal');\nsetEl('sv-leak',lk===1?'Leak: LEAKED':'Leak: NORMAL',lk===1?'critical':'normal');\nsetEl('sv-ct','Temp: '+fmt(ct)+'\u00b0C / Humid: '+fmt(ch)+'%',evalChasT(ct)==='critical'||evalChasH(ch)==='critical'?'critical':evalChasT(ct)==='warning'||evalChasH(ch)==='warning'?'warning':'normal');\nsetEl('sv-ch','Temp: '+fmt(ct)+'\u00b0C / Humid: '+fmt(ch)+'%',evalChasT(ct)==='critical'||evalChasH(ch)==='critical'?'critical':evalChasT(ct)==='warning'||evalChasH(ch)==='warning'?'warning':'normal');",
        "onInit": ""
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant.*|LEAK.*|Air.*\"}",
          "instant": true,
          "legendFormat": "{{metric}}",
          "refId": "A"
        }
      ],
      "title": "Cooling Health",
      "type": "gapit-htmlgraphics-panel"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 16, "w": 12, "x": 6, "y": 14 },
      "id": 6,
      "options": {
        "SVGBaseFix": true,
        "add100Percentage": true,
        "centerAlignContent": false,
        "overflow": "auto",
        "css": "* { box-sizing: border-box; margin: 0; padding: 0; }\n.compute { width: 100%; height: 100%; padding: 8px; font-family: Inter, sans-serif; color: #ddd; display: flex; flex-direction: column; gap: 6px; }\n.toolbar { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }\n.toolbar label { font-size: 10px; color: #999; display: flex; align-items: center; gap: 3px; cursor: pointer; }\n.toolbar input[type=radio],\n.toolbar input[type=checkbox] { accent-color: #4A9BF5; cursor: pointer; }\n.cards { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 6px; }\n.card { background: rgba(255,255,255,0.04); border-radius: 6px; padding: 8px; }\n.card h4 { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; color: #aaa; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 4px; }\n.tbl { width: 100%; border-collapse: collapse; font-size: 11px; }\n.tbl th { text-align: left; font-weight: 600; padding: 3px 6px; color: #999; font-size: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }\n.tbl td { padding: 3px 6px; font-variant-numeric: tabular-nums; }\n.tbl td.normal { color: #73BF69; }\n.tbl td.warning { color: #FADE2A; }\n.tbl td.critical { color: #F2495C; }\n.bar-container { display: flex; align-items: center; gap: 4px; }\n.bar { height: 12px; border-radius: 2px; min-width: 2px; }\n.bar.normal { background: #73BF69; }\n.bar.warning { background: #FADE2A; }\n.bar.critical { background: #F2495C; }",
        "html": "<div class='compute'>\n  <div class='toolbar'>\n    <span style='font-size:10px;color:#777;margin-right:4px;'>View:</span>\n    <label><input type='radio' name='viewMode' value='table' checked /> Table</label>\n    <label><input type='radio' name='viewMode' value='bar' /> Bar</label>\n    <span style='font-size:10px;color:#777;margin-left:8px;margin-right:4px;'>Group:</span>\n    <label><input type='radio' name='groupBy' value='category' checked /> Category</label>\n    <label><input type='radio' name='groupBy' value='metric' /> Metric</label>\n  </div>\n  <div class='cards' id='compute-cards'>\n    <div class='card'><h4>AI Processors</h4><div id='gpu-content'>Loading...</div></div>\n    <div class='card'><h4>CPUs</h4><div id='cpu-content'>Loading...</div></div>\n    <div class='card'><h4>Memory</h4><div id='mem-content'>Loading...</div></div>\n  </div>\n</div>",
        "onRender": "const m={};\ndata.series.forEach(s=>{\n  if(!s.fields||s.fields.length<2)return;\n  const f=s.fields[1];\n  const metric=(f.labels||{}).metric||'';\n  const vals=f.values;\n  if(vals&&vals.length>0) m[metric]=vals[vals.length-1];\n});\n\nfunction fmt(v,d){return v!==undefined&&v!==null?Number(v).toFixed(d!==undefined?d:1):'-';}\nfunction evalGpuT(v){if(v===undefined)return'normal';if(v>90)return'critical';if(v>75)return'warning';return'normal';}\nfunction evalCpuT(v){if(v===undefined)return'normal';if(v>95)return'critical';if(v>85)return'warning';return'normal';}\nfunction evalMemA(p){if(p===undefined)return'normal';if(p<10)return'critical';if(p<20)return'warning';return'normal';}\nfunction evalSwap(v){if(v===undefined)return'normal';if(v>0)return'warning';return'normal';}\nfunction evalOom(v){if(v===undefined)return'normal';if(v>=1)return'critical';return'normal';}\n\nconst viewMode=htmlNode.querySelector('input[name=viewMode]:checked');\nconst isBar=viewMode&&viewMode.value==='bar';\n\nfunction makeRow(label,val,unit,cls,max){\n  if(isBar){\n    const pct=max?Math.min((val||0)/max*100,100):0;\n    return '<tr><td>'+label+'</td><td class=\"'+cls+'\"><div class=\"bar-container\"><div class=\"bar '+cls+'\" style=\"width:'+pct+'%\"></div><span>'+fmt(val)+unit+'</span></div></td></tr>';\n  }\n  return '<tr><td>'+label+'</td><td class=\"'+cls+'\">'+fmt(val)+unit+'</td></tr>';\n}\n\n// GPU data\nconst gpus={};\nObject.keys(m).forEach(k=>{\n  let match;\n  if(match=k.match(/^(.+) asic temperature$/)){gpus[match[1]]=gpus[match[1]]||{};gpus[match[1]].temp=m[k];}\n  if(match=k.match(/^(.+) current power usage$/)){gpus[match[1]]=gpus[match[1]]||{};gpus[match[1]].power=m[k];}\n  if(match=k.match(/^(.+) Max power limit$/)){gpus[match[1]]=gpus[match[1]]||{};gpus[match[1]].maxPower=m[k];}\n  if(match=k.match(/^(.+) core utilization$/)){gpus[match[1]]=gpus[match[1]]||{};gpus[match[1]].coreUtil=m[k];}\n  if(match=k.match(/^(.+) memory utilization$/)){gpus[match[1]]=gpus[match[1]]||{};gpus[match[1]].memUtil=m[k];}\n});\n\nlet gpuHtml='<table class=\"tbl\"><tr><th>Device</th><th>Temp</th><th>Power</th><th>Core%</th><th>Mem%</th></tr>';\nObject.keys(gpus).sort().forEach(name=>{\n  const g=gpus[name];\n  gpuHtml+='<tr><td>'+name+'</td>';\n  gpuHtml+='<td class=\"'+evalGpuT(g.temp)+'\">'+fmt(g.temp)+'\u00b0C</td>';\n  gpuHtml+='<td>'+fmt(g.power)+'W</td>';\n  gpuHtml+='<td>'+fmt(g.coreUtil)+'%</td>';\n  gpuHtml+='<td>'+fmt(g.memUtil)+'%</td></tr>';\n});\nif(!Object.keys(gpus).length) gpuHtml+='<tr><td colspan=\"5\" style=\"color:#666\">No data</td></tr>';\ngpuHtml+='</table>';\n\nconst gpuEl=htmlNode.querySelector('#gpu-content');if(gpuEl)gpuEl.innerHTML=gpuHtml;\n\n// CPU data\nconst cpus={};\nObject.keys(m).forEach(k=>{\n  let match;\n  if(match=k.match(/^(CPU\\d+) temperature$/)){cpus[match[1]]=cpus[match[1]]||{};cpus[match[1]].temp=m[k];}\n  if(match=k.match(/^(CPU\\d+) power usage$/)){cpus[match[1]]=cpus[match[1]]||{};cpus[match[1]].power=m[k];}\n});\nconst cpuUtil=m['CPU Usage'];\n\nlet cpuHtml='<table class=\"tbl\"><tr><th>Device</th><th>Temp</th><th>Power</th></tr>';\nObject.keys(cpus).sort().forEach(name=>{\n  const c=cpus[name];\n  cpuHtml+='<tr><td>'+name+'</td>';\n  cpuHtml+='<td class=\"'+evalCpuT(c.temp)+'\">'+fmt(c.temp)+'\u00b0C</td>';\n  cpuHtml+='<td>'+fmt(c.power)+'W</td></tr>';\n});\nif(!Object.keys(cpus).length) cpuHtml+='<tr><td colspan=\"3\" style=\"color:#666\">No data</td></tr>';\ncpuHtml+='</table>';\ncpuHtml+='<div style=\"margin-top:4px;font-size:11px;\">Total CPU Utilization: <span style=\"font-weight:700\">'+fmt(cpuUtil)+'%</span></div>';\n\nconst cpuEl=htmlNode.querySelector('#cpu-content');if(cpuEl)cpuEl.innerHTML=cpuHtml;\n\n// Memory\nconst mT=m['Memory_total'],mU=m['Memory_usage'],mA=m['Memory_available'],sw=m['Swap_usage'],oom=m['OOM_count'];\nconst maPct=mT&&mA?(mA/mT*100):undefined;\nlet memHtml='<table class=\"tbl\">';\nmemHtml+=makeRow('Available',maPct,'%',evalMemA(maPct),100);\nmemHtml+=makeRow('Used',mU,' GB','normal',mT||1);\nmemHtml+=makeRow('Total',mT,' GB','normal',mT||1);\nmemHtml+=makeRow('Swap Usage',sw,' GB',evalSwap(sw),100);\nmemHtml+=makeRow('OOM Count',oom,'',evalOom(oom),10);\nmemHtml+='</table>';\n\nconst memEl=htmlNode.querySelector('#mem-content');if(memEl)memEl.innerHTML=memHtml;",
        "onInit": "// Add event listeners for view mode toggles\nhtmlNode.querySelectorAll('input[name=viewMode],input[name=groupBy]').forEach(inp=>{\n  inp.addEventListener('change', () => {\n    // Trigger re-render by dispatching a custom event\n    htmlNode.dispatchEvent(new Event('render'));\n  });\n});"
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"CPU.*|.*asic temperature|.*power usage|.*utilization|.*power limit|Memory.*|Swap.*|OOM.*\"}",
          "instant": true,
          "legendFormat": "{{metric}}",
          "refId": "A"
        }
      ],
      "title": "Compute Health",
      "type": "gapit-htmlgraphics-panel"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "gridPos": { "h": 16, "w": 6, "x": 18, "y": 14 },
      "id": 7,
      "options": {
        "SVGBaseFix": true,
        "add100Percentage": true,
        "centerAlignContent": false,
        "overflow": "auto",
        "css": "* { box-sizing: border-box; margin: 0; padding: 0; }\n.network { width: 100%; height: 100%; padding: 10px; font-family: Inter, sans-serif; color: #ddd; display: flex; flex-direction: column; gap: 10px; }\n.net-card { background: rgba(255,255,255,0.04); border-radius: 6px; padding: 10px; }\n.net-card h4 { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; color: #999; margin-bottom: 8px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 4px; }\n.net-row { display: flex; justify-content: space-between; padding: 4px 0; font-size: 12px; }\n.net-row .lb { opacity: 0.7; }\n.net-row .vl { font-weight: 700; font-variant-numeric: tabular-nums; }\n.vl.normal { color: #73BF69; }\n.vl.warning { color: #FADE2A; }\n.vl.critical { color: #F2495C; }\n.status-indicator { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 4px; }\n.status-indicator.up { background: #73BF69; }\n.status-indicator.down { background: #F2495C; }",
        "html": "<div class='network'>\n  <div class='net-card'>\n    <h4>Link Status</h4>\n    <div class='net-row'>\n      <span class='lb'>Status</span>\n      <span class='vl' id='n-link'><span class='status-indicator'></span>-</span>\n    </div>\n  </div>\n  <div class='net-card'>\n    <h4>Throughput</h4>\n    <div class='net-row'>\n      <span class='lb'>TX</span>\n      <span class='vl normal' id='n-tx'>-</span>\n    </div>\n    <div class='net-row'>\n      <span class='lb'>RX</span>\n      <span class='vl normal' id='n-rx'>-</span>\n    </div>\n  </div>\n  <div class='net-card'>\n    <h4>Errors / Drops</h4>\n    <div class='net-row'>\n      <span class='lb'>Error Rate</span>\n      <span class='vl' id='n-err'>-</span>\n    </div>\n    <div class='net-row'>\n      <span class='lb'>Drop Rate</span>\n      <span class='vl' id='n-drop'>-</span>\n    </div>\n  </div>\n</div>",
        "onRender": "const m={};\ndata.series.forEach(s=>{\n  if(!s.fields||s.fields.length<2)return;\n  const f=s.fields[1];\n  const metric=(f.labels||{}).metric||'';\n  const vals=f.values;\n  if(vals&&vals.length>0) m[metric]=vals[vals.length-1];\n});\n\nfunction fmt(v,d){return v!==undefined&&v!==null?Number(v).toFixed(d!==undefined?d:4):'-';}\nfunction el(id){return htmlNode.querySelector('#'+id);}\n\nconst link=m['Network link status'];\nconst tx=m['Network TX throughput'];\nconst rx=m['Network RX throughput'];\nconst err=m['Network errors rate'];\nconst drop=m['Network drops rate'];\n\n// Link\nconst linkEl=el('n-link');\nif(linkEl){\n  if(link===1) linkEl.innerHTML='<span class=\"status-indicator up\"></span><span class=\"vl normal\">UP</span>';\n  else if(link===0) linkEl.innerHTML='<span class=\"status-indicator down\"></span><span class=\"vl critical\">DOWN</span>';\n  else linkEl.innerHTML='-';\n}\n\n// Throughput\nconst txEl=el('n-tx');if(txEl){txEl.textContent=fmt(tx,4)+' Gbps';txEl.className='vl normal';}\nconst rxEl=el('n-rx');if(rxEl){rxEl.textContent=fmt(rx,4)+' Gbps';rxEl.className='vl normal';}\n\n// Errors\nconst errEl=el('n-err');if(errEl){errEl.textContent=fmt(err,4)+' %';errEl.className='vl normal';}\n\n// Drops\nconst dropEl=el('n-drop');\nif(dropEl){\n  dropEl.textContent=fmt(drop,4)+' %';\n  if(drop>=0.05) dropEl.className='vl critical';\n  else if(drop>0.01) dropEl.className='vl warning';\n  else dropEl.className='vl normal';\n}",
        "onInit": ""
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Network.*\"}",
          "instant": true,
          "legendFormat": "{{metric}}",
          "refId": "A"
        }
      ],
      "title": "Network Health",
      "type": "gapit-htmlgraphics-panel"
    },
    {
      "collapsed": false,
      "gridPos": { "h": 1, "w": 24, "x": 0, "y": 30 },
      "id": 8,
      "panels": [],
      "title": "History (Past 24h)",
      "type": "row"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6,
            "drawStyle": "line", "fillOpacity": 7, "gradientMode": "none",
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2,
            "pointSize": 5, "scaleDistribution": { "type": "linear" },
            "showPoints": "auto", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "dashed" }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "#EAB839", "value": 40 },
              { "color": "red", "value": 45 }
            ]
          },
          "unit": "celsius"
        },
        "overrides": [
          {
            "matcher": { "id": "byRegexp", "options": "/outlet/" },
            "properties": [
              { "id": "thresholds", "value": { "mode": "absolute", "steps": [
                { "color": "green", "value": null },
                { "color": "#EAB839", "value": 60 },
                { "color": "red", "value": 65 }
              ]}}
            ]
          },
          {
            "matcher": { "id": "byRegexp", "options": "/deltaT/" },
            "properties": [
              { "id": "thresholds", "value": { "mode": "absolute", "steps": [
                { "color": "green", "value": null },
                { "color": "#EAB839", "value": 15 },
                { "color": "red", "value": 20 }
              ]}}
            ]
          }
        ]
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 31 },
      "id": 9,
      "options": {
        "legend": { "calcs": ["min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "hideZeros": false, "mode": "multi", "sort": "none" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"Coolant temperature.*|Coolant deltaT.*\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Coolant Temperature",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6,
            "drawStyle": "line", "fillOpacity": 7, "gradientMode": "none",
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2,
            "pointSize": 5, "scaleDistribution": { "type": "linear" },
            "showPoints": "auto", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "dashed" }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "#EAB839", "value": 40 },
              { "color": "red", "value": 50 }
            ]
          },
          "unit": "celsius"
        },
        "overrides": [
          {
            "matcher": { "id": "byName", "options": "Air humidity" },
            "properties": [
              { "id": "custom.axisPlacement", "value": "right" },
              { "id": "unit", "value": "percent" },
              { "id": "thresholds", "value": { "mode": "absolute", "steps": [
                { "color": "red", "value": null },
                { "color": "#EAB839", "value": 10 },
                { "color": "green", "value": 20 },
                { "color": "#EAB839", "value": 60 },
                { "color": "red", "value": 80 }
              ]}}
            ]
          }
        ]
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 31 },
      "id": 10,
      "options": {
        "legend": { "calcs": ["min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "hideZeros": false, "mode": "multi", "sort": "none" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air temperature\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Air humidity\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "Chassis Temperature & Humidity",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6,
            "drawStyle": "line", "fillOpacity": 7, "gradientMode": "none",
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2,
            "pointSize": 5, "scaleDistribution": { "type": "linear" },
            "showPoints": "auto", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "dashed" }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "#EAB839", "value": 85 },
              { "color": "red", "value": 95 }
            ]
          },
          "unit": "celsius"
        },
        "overrides": [
          {
            "matcher": { "id": "byRegexp", "options": "/asic temperature/" },
            "properties": [
              { "id": "thresholds", "value": { "mode": "absolute", "steps": [
                { "color": "green", "value": null },
                { "color": "#EAB839", "value": 75 },
                { "color": "red", "value": 90 }
              ]}}
            ]
          }
        ]
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 39 },
      "id": 11,
      "options": {
        "legend": { "calcs": ["min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "hideZeros": false, "mode": "multi", "sort": "none" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"CPU[0-9]+ temperature\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\".*asic temperature\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "CPU & GPU Temperature",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6,
            "drawStyle": "line", "fillOpacity": 7, "gradientMode": "none",
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2,
            "pointSize": 5, "scaleDistribution": { "type": "linear" },
            "showPoints": "auto", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "red", "value": 600 }
            ]
          },
          "unit": "watt"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 39 },
      "id": 12,
      "options": {
        "legend": { "calcs": ["min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "hideZeros": false, "mode": "multi", "sort": "none" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\"CPU[0-9]+ power usage\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\".*current power usage\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "CPU & GPU Power Usage",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6,
            "drawStyle": "line", "fillOpacity": 7, "gradientMode": "none",
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2,
            "pointSize": 5, "scaleDistribution": { "type": "linear" },
            "showPoints": "auto", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "max": 100,
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "#EAB839", "value": 80 },
              { "color": "red", "value": 95 }
            ]
          },
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 47 },
      "id": 13,
      "options": {
        "legend": { "calcs": ["min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "hideZeros": false, "mode": "multi", "sort": "none" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"CPU Usage\"}",
          "legendFormat": "CPU Usage",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\".*core utilization\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "B"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=~\".*memory utilization\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "C"
        }
      ],
      "title": "Utilization",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6,
            "drawStyle": "line", "fillOpacity": 7, "gradientMode": "none",
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2,
            "pointSize": 5, "scaleDistribution": { "type": "linear" },
            "showPoints": "auto", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null }
            ]
          },
          "unit": "decgbytes"
        },
        "overrides": [
          {
            "matcher": { "id": "byName", "options": "Swap_usage" },
            "properties": [
              { "id": "color", "value": { "fixedColor": "orange", "mode": "fixed" } },
              { "id": "custom.fillOpacity", "value": 15 }
            ]
          }
        ]
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 47 },
      "id": 14,
      "options": {
        "legend": { "calcs": ["min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "hideZeros": false, "mode": "multi", "sort": "none" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Memory_total\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Memory_usage\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "B"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Memory_available\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "C"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Swap_usage\"}",
          "legendFormat": "{{metric}}",
          "range": true,
          "refId": "D"
        }
      ],
      "title": "Memory & Swap",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6,
            "drawStyle": "line", "fillOpacity": 7, "gradientMode": "none",
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2,
            "pointSize": 5, "scaleDistribution": { "type": "linear" },
            "showPoints": "auto", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "off" }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null }
            ]
          },
          "unit": "Gbps"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 55 },
      "id": 15,
      "options": {
        "legend": { "calcs": ["min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "hideZeros": false, "mode": "multi", "sort": "none" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Network TX throughput\"}",
          "legendFormat": "TX",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Network RX throughput\"}",
          "legendFormat": "RX",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "Network Throughput",
      "type": "timeseries"
    },
    {
      "datasource": { "type": "prometheus", "uid": "${datasource}" },
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": {
            "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text",
            "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "barWidthFactor": 0.6,
            "drawStyle": "line", "fillOpacity": 7, "gradientMode": "none",
            "hideFrom": { "legend": false, "tooltip": false, "viz": false },
            "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2,
            "pointSize": 5, "scaleDistribution": { "type": "linear" },
            "showPoints": "auto", "spanNulls": false,
            "stacking": { "group": "A", "mode": "none" },
            "thresholdsStyle": { "mode": "dashed" }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "#EAB839", "value": 0.01 },
              { "color": "red", "value": 0.05 }
            ]
          },
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 55 },
      "id": 16,
      "options": {
        "legend": { "calcs": ["min", "max", "mean"], "displayMode": "table", "placement": "bottom", "showLegend": true },
        "tooltip": { "hideZeros": false, "mode": "multi", "sort": "none" }
      },
      "targets": [
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Network errors rate\"}",
          "legendFormat": "Errors",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": { "type": "prometheus", "uid": "${datasource}" },
          "editorMode": "code",
          "expr": "DLC_sensors_gauge{server_name=\"dg5R\", metric=\"Network drops rate\"}",
          "legendFormat": "Drops",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "Network Errors & Drops",
      "type": "timeseries"
    }
  ],
  "refresh": "10s",
  "schemaVersion": 39,
  "tags": ["dg5R", "DLC"],
  "templating": {
    "list": [
      {
        "current": { "selected": false, "text": "", "value": "" },
        "hide": 2,
        "includeAll": false,
        "label": "datasource",
        "multi": false,
        "name": "datasource",
        "options": [],
        "query": "prometheus",
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "type": "datasource"
      }
    ]
  },
  "time": { "from": "now-24h", "to": "now" },
  "timepicker": {},
  "timezone": "browser",
  "title": "dg5R Dashboard",
  "uid": "dg5R-dashboard-v1",
  "version": 1,
  "weekStart": ""
}
